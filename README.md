# A Project Studying Population Health Indicators

This repository holds the analysis for the QTM 350 final project on whether China and India are converging toward Japan in core population health indicators (life expectancy, under-5 mortality, and adolescent fertility) from 1993–2023. We preprocessed World Bank World Development Indicators (WDI) data by ingesting them into SQLite, then cleaned the data and explored them through Python scripts, Quarto, and supporting documentation.

## Repository Structure
- `data/raw/` – Original WDI CSV downloads (`wdi_pophealth_data.csv`, `wdi_pophealth_metadata.csv`).
- `data/clean/` – Tidy, filtered data exported by the cleaning script.
- `data/wdi.db` – SQLite database with raw and processed tables (`raw_wdi_*`, `wdi_pophealth_clean`, `wdi_values`).
- `scripts/` – Reproducible code (`01_create_db.py`, `02_clean_wdi.py`, `03_descriptive_stats.py`, `descriptive_stats.sql`).
- `documentation/` – Codebook and ER diagram that describe variables and database design.
- `report.qmd`, `report.html`, `report.pdf`, `report_files/` – Quarto source and rendered report describing the full analysis, figures, and discussion.
- `figures/` – Saved plots included in the report.
- `Final*.ipynb` – Exploratory notebook used during development.

<!-- ## Environment Setup
1. Ensure you have Python 3.9+ and, for rendering the report, [Quarto](https://quarto.org/) installed.
   ```
2. Install Python dependencies used throughout the scripts and report:
   ```bash
   pip install pandas matplotlib jupyter
   ```
   `sqlite3` ships with the Python standard library. -->

## How to run the code
Run each script from the project root so relative paths resolve correctly.

1. **Create the SQLite database**
   ```bash
   python scripts/01_create_db.py
   ```
   - Reads the raw CSVs in `data/raw/` and writes them to `data/wdi.db` as `raw_wdi_data` and `raw_wdi_metadata`.

2. **Clean, reshape, and filter the indicators of interest**
   ```bash
   python scripts/02_clean_wdi.py
   ```
   - Melts the wide WDI extract into a long panel, keeps the 1993–2023 observations for China, India, and Japan for the three population-health indicators, and saves the cleaned table to both SQLite (`wdi_pophealth_clean`, `wdi_values`) and `data/clean/wdi_pophealth_clean.csv`.

3. **Generate descriptive statistics**
   ```bash
   python scripts/03_descriptive_stats.py
   ```

<!-- ## Rendering the Report
The Quarto document combines code and narrative to produce the figures and results used in the final deliverables.

```bash
quarto render report.qmd
```

- The default target is HTML; the rendered file appears as `report.html`. A PDF version (`report.pdf`) is already provided and can be regenerated by adding `--to pdf` if LaTeX is available.
- Quarto executes the embedded Python chunks, so ensure the SQLite database (`data/wdi.db`) exists before rendering. -->
<!-- 
## Additional References
- `documentation/codebook.md` summarizes each variable, its source, and units.
- `documentation/er_diagram.md` documents the database schema used in both the scripts and Quarto analysis.
- `figures/` contains exported visualizations if you need static copies for slides or other collateral.

Following the steps above from a clean clone will recreate the database, cleaned dataset, descriptive statistics, and the full narrative report. Feel free to extend the pipeline by adding new scripts under `scripts/` and referencing them in this README as needed. -->

## View Online
- [HTML Report](https://EricJinhao.github.io/qtm350-final/report.html)
- [PDF Report](report.pdf)
